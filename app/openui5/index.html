<!DOCTYPE html>
<html>
<head>
<meta http-equiv='X-UA-Compatible' content='IE=edge' />
<title>Hello Pipeline</title>

<link rel="stylesheet" href="../bower_components/openui5-themelib_sap_bluecrystal/resources/sap/ui/core/themes/sap_bluecrystal/library.css">
<link rel="stylesheet" href="../bower_components/openui5-themelib_sap_bluecrystal/resources/sap/m/themes/sap_bluecrystal/library.css">
<link rel="stylesheet" href="./control/style.css">
<link rel="stylesheet" href="./view/style.css">

<script id='sap-ui-bootstrap'
	src='../bower_components/openui5-sap.ui.core/resources/sap-ui-core.js'
	data-sap-ui-theme='sap_bluecrystal'
	data-sap-ui-libs='sap.m'
	data-sap-ui-compatVersion='edge'
	data-sap-ui-preload='async'
	data-sap-ui-resourceroots='{
		"sap.m": "../bower_components/openui5-sap.m/resources/sap/m",
		"sap.ciconnect.view": "./view",
		"sap.ciconnect.control": "./control"
	}'>
</script>

<script>
	sap.ui.getCore().attachInit(function () {
		
		registerOctIcons();
		
		var oPipelinesView = sap.ui.view({
			id:"pipelines",
			viewName:"sap.ciconnect.view.pipelines",
			type:sap.ui.core.mvc.ViewType.XML
		});
		
		var oRepositoryView = sap.ui.view({
			id:"repositories",
			viewName:"sap.ciconnect.view.repositories",
			type:sap.ui.core.mvc.ViewType.XML
		});
		
		var oSummaryView = sap.ui.view({
			id:"summary",
			viewName:"sap.ciconnect.view.summary",
			type:sap.ui.core.mvc.ViewType.XML
		});
		
		var oIconTabBar = new sap.m.IconTabBar({
			stretchContentHeight: true,
			backgroundDesign: "Transparent",
			applyContentPadding: false,
			items: [new sap.m.IconTabFilter({
				text: "Pipelines",
				count: 3,
				content: oPipelinesView
			}), new sap.m.IconTabFilter({
				text: "Repositories",
				count: 5,
				content: oRepositoryView
			}), new sap.m.IconTabFilter({
				text: "Summary",
				content: oSummaryView
			})]
		}).addStyleClass("sapUiResponsiveContentPadding"); 
		
		var oPage = new sap.m.Page({
			id: "ciconnect",
			title: "CI-Connect PoC",
			content: oIconTabBar
		});
		
		var oApp = new sap.m.App({initialPage:"ciconnect"});
		oApp.addPage(oPage);
		oApp.placeAt("content");
		
		function registerOctIcons() {
			jQuery.sap.require("sap.ui.core.IconPool");
			var oOctIcons = {
					fontFamily: "oct",
					collectionName: "oct",
					icons : [
						["octicon-repo-forked", "f002"], ["octicon-repo", "f001"], 
						["octicon-octoface", "f008"], ["octicon-mark-github", "f00a"],
						["octicon-shield", "f0e1"]
					]
				};

				for (var i = 0; i < oOctIcons.icons.length; i++) {
					sap.ui.core.IconPool.addIcon(
						oOctIcons.icons[i][0], 
						oOctIcons.collectionName, 
						oOctIcons.fontFamily, 
						oOctIcons.icons[i][1],
						false,
						true);
				}
		};
	});
</script>

</head>
<body class='sapUiBody'>
	<div id='content'></div>
</body>
</html>