<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"
		controllerName="sap.ciconnect.view.index" xmlns:html="http://www.w3.org/1999/xhtml">
		
	<App initialPage="ciconnect">
		<Page id="ciconnect" title="Viz Pipeline PoC" enableScrolling="false">
			<headerContent>
				<Button icon="sap-icon://legend" press="onPopLegend" />
			</headerContent>
			<content>
				<IconTabBar stretchContentHeight="true"
					backgroundDesign="Transparent"
					applyContentPadding="false"
					selectedKey="{setting>/selectedTabKey}"
					class="sapUiResponsiveContentPadding">
					<items>
						<IconTabFilter text="Overview"
							key="Summary"
							icon="sap-icon://kpi-corporate-performance">
							<content>
								<mvc:XMLView id="summaryView" viewName="sap.ciconnect.view.summary" />
							</content>
						</IconTabFilter>
						<IconTabFilter text="Pipelines"
							key="Pipelines"
							icon="sap-icon://awesome/fa-pied-piper-pp"
							count="{= ${pipeline>/}.length}">
							<content>
								<mvc:XMLView id="pipelineView" viewName="sap.ciconnect.view.pipelines" />
							</content>
						</IconTabFilter>
						<IconTabFilter text="Repositories"
							key="Repositories"
							icon="sap-icon://oct/octicon-repo"
							count="{= ${repo>/}.length}">
							<content>
								<mvc:XMLView id="repoView" viewName="sap.ciconnect.view.repositories" />
							</content>
						</IconTabFilter>
					</items>
				</IconTabBar>
			</content>
			<footer>
				<Toolbar>
					<content>
						<Token text="{setting>/pipelineTokenText}" visible="{setting>/pipelineTokenVisible}" 
							press="onPipelineTokenPressed" delete="onPipelineTokenDelete"/>
						<Token text="{setting>/repoTokenNumber} repos" visible="{setting>/repoTokenVisible}" 
							press="onRepoTokenPressed" delete="onRepoTokenDelete"/>
						<ToolbarSpacer />
						<OverflowToolbarButton icon="sap-icon://multiselect-all"
							tooltip="Select All"
							enabled="{= ${setting>/selectedTabKey} === 'Repositories'}"
							press="onSelectAll"/>
							<OverflowToolbarButton icon="sap-icon://multiselect-none"
							tooltip="Deselect All"
							enabled="{= ${setting>/selectedTabKey} !== 'Summary'}"
							press="onDeselectAll"/>
						<OverflowToolbarButton icon="sap-icon://add" 
							tooltip="Add a git repository via url" 
							press="onPopAdd"/>
						<OverflowToolbarButton icon="sap-icon://less"
							tooltip="Delete selected git repositories" 
							enabled="{= ${setting>/repoTokenGitSelected}}"
							press="onPopDelete" />
						<OverflowToolbarButton icon="sap-icon://connected"
							tooltip="Assign pipeline to repository"
							enabled="{= ${setting>/pipelineTokenVisible} &amp;&amp; ${setting>/repoTokenVisible}}"
							press="onPopAssign"/>
						<OverflowToolbarButton icon="sap-icon://disconnected"
							tooltip="Unassign pipeline from repository"
							enabled="{= ${setting>/pipelineTokenVisible} &amp;&amp; ${setting>/pipelineTokenHasRepoAssigned} || ${setting>/repoTokenVisible} &amp;&amp; ${setting>/repoTokenHasPipelineAssigned}}"
							press="onPopUnassign"/>
					</content>
				</Toolbar>
			</footer>
		</Page>
	</App>
</mvc:View>